import{H as J,_ as Q,j as W,r as l,k as Y,o as Z,F as j,b as p,c as B,d as E,e as t,f as o,g as n,m as ee,i as m,t as _,q as te,s as ae}from"./index.7427913b.js";import{C as oe}from"./CasesService.96a0752b.js";import{B as se}from"./BrandService.8f5f464e.js";import{D as le}from"./DepartmentService.395eda6f.js";import{S as ne}from"./StatusService.64e55fd7.js";const ie="exports";class de{async exportCasesToExcel(c){const y=`${ie}/excel?brandId=${c.brandId}&departmentId=${c.departmentId}&caseStatusId=${c.caseStatusId}&initialDate=${c.initialDate}&finalDate=${c.finalDate}`;window.open(`${J.defaults.baseURL}/${y}`,"_blank")}}const s=h=>(te("data-v-f770039e"),h=h(),ae(),h),re={class:"grid"},ce={class:"col-12"},ue={key:0,class:"card"},pe={class:"my-2"},me={class:"formgroup-inline"},_e={class:"field"},ve=s(()=>t("label",{for:"firstname1",class:"p-sr-only"},"Entidad",-1)),he={class:"field"},fe=s(()=>t("label",{for:"lastname1",class:"p-sr-only"},"Estado",-1)),ge={class:"field"},be=s(()=>t("label",{for:"lastname1",class:"p-sr-only"},"Dirigido a:",-1)),ye={class:"field"},we=s(()=>t("label",{for:"lastname1",class:"p-sr-only"},"Fecha Inicio",-1)),Se={class:"field"},De=s(()=>t("label",{for:"lastname1",class:"p-sr-only"},"Fecha Fin",-1)),xe={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},Ie=s(()=>t("h5",{class:"m-0"},"Reporte de Casos",-1)),Ve={class:"block mt-2 md:mt-0 p-input-icon-left"},Ce=s(()=>t("i",{class:"pi pi-search"},null,-1)),Re=s(()=>t("span",{class:"p-column-title"},"Fecha Recepci\xF3n",-1)),Te=s(()=>t("span",{class:"p-column-title"},"Recibido Fisico",-1)),Pe=s(()=>t("span",{class:"p-column-title"},"No. Circular",-1)),Be=s(()=>t("span",{class:"p-column-title"},"Origen",-1)),Ee=s(()=>t("span",{class:"p-column-title"},"Descripci\xF3n",-1)),ke=s(()=>t("span",{class:"p-column-title"},"Area",-1)),Fe=s(()=>t("span",{class:"p-column-title"},"Fecha Vencimiento",-1)),Le=s(()=>t("span",{class:"p-column-title"},"Estado",-1)),Ne={__name:"Report",setup(h){const c=W(),y=l(!0),k=l(!1),f=l(!1);l(null);const D=l(!1),S=l(null),w=l({page:0,pageSize:10,total:0}),x=l(null),F=l(null),g=l({}),I=l(null),V=l(null),C=l(null),i=l({brandId:"",departmentId:"",caseStatusId:"",initialDate:"",finalDate:""}),R=new oe,L=new de,N=new se,U=new le,$=new ne;Y(()=>{q()}),Z(()=>{T(),M(),z(),O()});const T=()=>{var v;f.value=!0;const a={page:1,pageSize:10,search:(v=g.value.global.value)!=null?v:""};R.readCases(a).then(u=>{S.value=u.data.entities,w.value=u.data.pagination}).finally(()=>{f.value=!1,y.value=!0,k.value=!1})},A=d=>{f.value=!0;const{page:a,rows:v}=d,u={page:a+1,pageSize:v,search:""};R.readCases(u).then(b=>{S.value=b.data.entities,w.value=b.data.pagination}).finally(()=>{f.value=!1})},M=()=>{N.readCatalogsAll().then(d=>{I.value=d.data})},z=()=>{U.readCatalogsAll().then(d=>{V.value=d.data})},O=()=>{$.readCatalogsAll().then(d=>{C.value=d.data})},H=()=>{D.value=!0,L.exportCasesToExcel(i.value).then(()=>{c.add({severity:"success",summary:"Successful",detail:"Archivo exportado",life:3e3})}).catch(()=>{c.add({severity:"error",summary:"Error",detail:"Error exportando archivo",life:3e3})}).finally(()=>{T(),D.value=!1})},q=()=>{g.value={global:{value:null,matchMode:j.CONTAINS}}};return(d,a)=>{const v=p("Toast"),u=p("Dropdown"),b=p("Calendar"),P=p("Button"),K=p("Toolbar"),X=p("InputText"),r=p("Column"),G=p("DataTable");return B(),E("div",re,[t("div",ce,[y.value?(B(),E("div",ue,[o(v),o(K,{class:"mb-4"},{start:n(()=>[t("div",pe,[t("div",me,[t("div",_e,[ve,o(u,{id:"state",modelValue:i.value.brandId,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value.brandId=e),options:I.value,optionLabel:"description",placeholder:"Entidad"},null,8,["modelValue","options"])]),t("div",he,[fe,o(u,{id:"state",modelValue:i.value.caseStatusId,"onUpdate:modelValue":a[1]||(a[1]=e=>i.value.caseStatusId=e),options:C.value,optionLabel:"description",placeholder:"Estado"},null,8,["modelValue","options"])]),t("div",ge,[be,o(u,{id:"state",modelValue:i.value.departmentId,"onUpdate:modelValue":a[2]||(a[2]=e=>i.value.departmentId=e),options:V.value,optionLabel:"name",placeholder:"Dirigido a:"},null,8,["modelValue","options"])]),t("div",ye,[we,o(b,{showIcon:!0,showButtonBar:!0,modelValue:i.value.initialDate,"onUpdate:modelValue":a[3]||(a[3]=e=>i.value.initialDate=e)},null,8,["modelValue"])]),t("div",Se,[De,o(b,{showIcon:!0,showButtonBar:!0,modelValue:i.value.finalDate,"onUpdate:modelValue":a[4]||(a[4]=e=>i.value.finalDate=e)},null,8,["modelValue"])]),o(P,{label:"Buscar"})])])]),end:n(()=>[o(P,{label:"Exportar",icon:"pi pi-upload",class:"p-button-secondary",onClick:a[5]||(a[5]=e=>H())})]),_:1}),o(G,{ref_key:"dt",ref:F,value:S.value,selection:x.value,"onUpdate:selection":a[7]||(a[7]=e=>x.value=e),dataKey:"id",paginator:!0,rows:w.value.pageSize,filters:g.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrar {first} a {last} de {totalRecords} casos",responsiveLayout:"scroll",totalRecords:w.value.total,onPage:a[8]||(a[8]=e=>A(e)),lazy:"",loading:f.value},{header:n(()=>[t("div",xe,[Ie,t("span",Ve,[Ce,o(X,{modelValue:g.value.global.value,"onUpdate:modelValue":a[6]||(a[6]=e=>g.value.global.value=e),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:n(()=>[o(r,{selectionMode:"multiple",headerStyle:"width: 3rem"}),o(r,{field:"category",header:"Fecha Recepci\xF3n",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[Re,m(" "+_(e.data.receptionDate),1)]),_:1}),o(r,{field:"name",header:"Recibido Fisico",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[Te,m(" "+_(e.data.physicallyReceived),1)]),_:1}),o(r,{field:"code",header:"No. Circular",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[Pe,m(" "+_(e.data.documentNumber),1)]),_:1}),o(r,{header:"Origen",headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[Be,m(" "+_(e.data.originDocumentDescription),1)]),_:1}),o(r,{field:"name",header:"Descripci\xF3n",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[Ee,m(" "+_(e.data.description),1)]),_:1}),o(r,{field:"name",header:"Area",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[ke,m(" "+_(e.data.departmentDescription),1)]),_:1}),o(r,{field:"category",header:"Fecha Vencimiento",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[Fe,m(" "+_(e.data.dueDate),1)]),_:1}),o(r,{field:"inventoryStatus",header:"Estado",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(e=>[Le,m(" "+_(e.data.caseStatusDescription),1)]),_:1})]),_:1},8,["value","selection","rows","filters","totalRecords","loading"])])):ee("",!0)])])}}},Oe=Q(Ne,[["__scopeId","data-v-f770039e"]]);export{Oe as default};
