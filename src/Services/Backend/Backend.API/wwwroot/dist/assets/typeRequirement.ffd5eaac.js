import{H as f,_ as J,j as W,r as c,k as X,o as Y,F as Z,b as p,c as T,d as P,e as r,f as a,g as u,i as U,t as N,n as ee,m as E,q as te,s as ae}from"./index.7427913b.js";const _="typeRequirements";class se{async readCatalogs(t){const l=`${_}?page=${t.page}&pageSize=${t.pageSize}&QueryParam=${t.search}`;return await f.get(l)}async readCatalogsAll(){const t=`${_}/all`;return await f.get(t)}async readCatalog(t){const l=`${_}/${t}`;return await f.get(l)}async createCatalog(t){const l=`${_}`;return await f.post(l,t)}async updateCatalog(t){const l=`${_}/${t.id}`;return await f.put(l,t)}async deleteCatalog(t){const l=`${_}/${t}`;return await f.delete(l)}}const y=b=>(te("data-v-81e76682"),b=b(),ae(),b),le={class:"grid"},oe={class:"col-12"},ne={class:"card"},ie={class:"my-2"},re={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ce=y(()=>r("h5",{class:"m-0"},"Tipos de Requerimiento",-1)),ue={class:"block mt-2 md:mt-0 p-input-icon-left"},de=y(()=>r("i",{class:"pi pi-search"},null,-1)),pe=y(()=>r("span",{class:"p-column-title"},"Descripci\xF3n",-1)),me={class:"field"},ve=y(()=>r("label",{for:"name"},"Descripci\xF3n",-1)),ge={key:0,class:"p-invalid"},fe={class:"flex align-items-center justify-content-center"},_e=y(()=>r("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ye={key:0},be={class:"flex align-items-center justify-content-center"},he=y(()=>r("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ce={key:0},ke={__name:"typeRequirement",setup(b){const t=W(),l=c(null);c(null);const d=c(!1),x=c({page:0,pageSize:10,total:0}),m=c(!1),h=c(!1),C=c(!1),n=c({}),v=c(null),V=c(null),k=c({}),w=c(!1),S=new se;X(()=>{H()}),Y(()=>{D()});const D=()=>{var g;d.value=!0;const e={page:1,pageSize:10,search:(g=k.value.global.value)!=null?g:""};S.readCatalogs(e).then(i=>{l.value=i.data.entities,x.value=i.data.pagination}).finally(()=>{d.value=!1})},q=o=>{d.value=!0;const{page:e,rows:g}=o,i={page:e+1,pageSize:g,search:""};S.readCatalogs(i).then(R=>{l.value=R.data.entities,x.value=R.data.pagination}).finally(()=>{d.value=!1})},I=()=>{n.value={},w.value=!1,m.value=!0},B=()=>{m.value=!1,w.value=!1},M=()=>{if(w.value=!0,n.value.id)S.updateCatalog(n.value).then(o=>{o.status==200||o.status==201?(t.add({severity:"success",summary:"Created",detail:"Registro actualizado correctamente!",life:3e3}),close(),D()):t.add({severity:"error",summary:"Deleted",detail:"Error creating record!",life:3e3})});else{let o={description:n.value.description};S.createCatalog(o).then(e=>{e.status==200||e.status==201?(t.add({severity:"success",summary:"Created",detail:"Record created successfully!",life:3e3}),close(),D()):t.add({severity:"error",summary:"Deleted",detail:"Error creating record!",life:3e3})})}m.value=!1},A=o=>{n.value={...o},m.value=!0},j=o=>{n.value=o,h.value=!0},F=()=>{l.value=l.value.filter(o=>o.id!==n.value.id),h.value=!1,n.value={},t.add({severity:"success",summary:"Successful",detail:"Item eliminado",life:3e3})},O=()=>{C.value=!0},G=()=>{l.value=l.value.filter(o=>!v.value.includes(o)),C.value=!1,v.value=null,t.add({severity:"success",summary:"Successful",detail:"Items eliminados",life:3e3})},H=()=>{k.value={global:{value:null,matchMode:Z.CONTAINS}}};return(o,e)=>{const g=p("Toast"),i=p("Button"),R=p("Toolbar"),z=p("InputText"),$=p("Column"),K=p("DataTable"),L=p("Dialog");return T(),P("div",le,[r("div",oe,[r("div",ne,[a(g),a(R,{class:"mb-4"},{start:u(()=>[r("div",ie,[a(i,{label:"Agregar",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:I}),a(i,{label:"Eliminar",icon:"pi pi-trash",class:"p-button-danger",onClick:O,disabled:!v.value||!v.value.length},null,8,["disabled"])])]),_:1}),a(K,{ref_key:"dt",ref:V,value:l.value,selection:v.value,"onUpdate:selection":e[1]||(e[1]=s=>v.value=s),dataKey:"id",paginator:!0,rows:x.value.pageSize,filters:k.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrar {first} to {last} of {totalRecords} registros",responsiveLayout:"scroll",totalRecords:x.value.total,onPage:e[2]||(e[2]=s=>q(s)),lazy:"",loading:d.value},{header:u(()=>[r("div",re,[ce,r("span",ue,[de,a(z,{modelValue:k.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=s=>k.value.global.value=s),placeholder:"Buscar...",onChange:D},null,8,["modelValue"])])])]),default:u(()=>[a($,{selectionMode:"multiple",headerStyle:"width: 3rem"}),a($,{field:"description",header:"Descripci\xF3n",sortable:!0,headerStyle:"width:90%; min-width:10rem;"},{body:u(s=>[pe,U(" "+N(s.data.description),1)]),_:1}),a($,{headerStyle:"min-width:10rem;"},{body:u(s=>[a(i,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:Q=>A(s.data)},null,8,["onClick"]),a(i,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:Q=>j(s.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","rows","filters","totalRecords","loading"]),a(L,{visible:m.value,"onUpdate:visible":e[4]||(e[4]=s=>m.value=s),style:{width:"450px"},header:"Detalles",modal:!0,class:"p-fluid"},{footer:u(()=>[a(i,{label:"Cancelar",icon:"pi pi-times",class:"p-button-text",onClick:B}),a(i,{label:"Guardar",icon:"pi pi-check",class:"p-button-text",onClick:M})]),default:u(()=>[r("div",me,[ve,a(z,{id:"name",modelValue:n.value.description,"onUpdate:modelValue":e[3]||(e[3]=s=>n.value.description=s),modelModifiers:{trim:!0},required:"true",autofocus:"",class:ee({"p-invalid":w.value&&!n.value.description})},null,8,["modelValue","class"]),w.value&&!n.value.description?(T(),P("small",ge,"Descripci\xF3n es requerido.")):E("",!0)])]),_:1},8,["visible"]),a(L,{visible:h.value,"onUpdate:visible":e[6]||(e[6]=s=>h.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:u(()=>[a(i,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[5]||(e[5]=s=>h.value=!1)}),a(i,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:F})]),default:u(()=>[r("div",fe,[_e,n.value?(T(),P("span",ye,[U(" Desea eliminar el registro "),r("b",null,N(n.value.description),1),U("?")])):E("",!0)])]),_:1},8,["visible"]),a(L,{visible:C.value,"onUpdate:visible":e[8]||(e[8]=s=>C.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:u(()=>[a(i,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[7]||(e[7]=s=>C.value=!1)}),a(i,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:G})]),default:u(()=>[r("div",be,[he,n.value?(T(),P("span",Ce,"Desea eliminar todos los elementos seleccionados?")):E("",!0)])]),_:1},8,["visible"])])])])}}},xe=J(ke,[["__scopeId","data-v-81e76682"]]);export{xe as default};
