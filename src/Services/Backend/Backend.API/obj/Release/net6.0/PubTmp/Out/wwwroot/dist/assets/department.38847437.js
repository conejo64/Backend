import{_ as H,j as J,r as n,k as Q,o as W,F as X,b as d,c as S,d as P,e as i,f as t,g as c,i as N,t as I,n as Y,m as V,q as Z,s as ee}from"./index.7427913b.js";import{D as te}from"./DepartmentService.395eda6f.js";const f=C=>(Z("data-v-fd00a0b4"),C=C(),ee(),C),ae={class:"grid"},le={class:"col-12"},se={class:"card"},oe={class:"my-2"},ie={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ne=f(()=>i("h5",{class:"m-0"},"Departamento",-1)),ce={class:"block mt-2 md:mt-0 p-input-icon-left"},re=f(()=>i("i",{class:"pi pi-search"},null,-1)),de=f(()=>i("span",{class:"p-column-title"},"Descripci\xF3n",-1)),ue={class:"field"},pe=f(()=>i("label",{for:"name"},"Descripci\xF3n",-1)),me={key:0,class:"p-invalid"},ve={class:"flex align-items-center justify-content-center"},fe=f(()=>i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ge={key:0},_e={class:"flex align-items-center justify-content-center"},be=f(()=>i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ye={key:0},he={__name:"department",setup(C){const u=J(),r=n(null);n(null);const g=n(!1),k=n({page:0,pageSize:10,total:0}),p=n(!1),_=n(!1),b=n(!1),s=n({}),m=n(null),M=n(null),y=n({}),h=n(!1),x=new te;Q(()=>{O()}),W(()=>{D()});const D=()=>{var v;g.value=!0;const e={page:1,pageSize:10,search:(v=y.value.global.value)!=null?v:""};x.readCatalogs(e).then(o=>{r.value=o.data.entities,k.value=o.data.pagination}).finally(()=>{g.value=!1})},R=l=>{g.value=!0;const{page:e,rows:v}=l,o={page:e+1,pageSize:v,search:""};x.readCatalogs(o).then(w=>{r.value=w.data.entities,k.value=w.data.pagination}).finally(()=>{g.value=!1})},B=()=>{s.value={},h.value=!1,p.value=!0},L=()=>{p.value=!1,h.value=!1},U=()=>{if(h.value=!0,s.value.id)x.updateCatalog(s.value).then(l=>{l.status==200||l.status==201?(u.add({severity:"success",summary:"Created",detail:"Registro actualizado correctamente!",life:3e3}),close(),D()):u.add({severity:"error",summary:"Deleted",detail:"Error creating record!",life:3e3})});else{let l={description:s.value.description};x.createCatalog(l).then(e=>{e.status==200||e.status==201?(u.add({severity:"success",summary:"Created",detail:"Record created successfully!",life:3e3}),close(),D()):u.add({severity:"error",summary:"Deleted",detail:"Error creating record!",life:3e3})})}p.value=!1},j=l=>{s.value={...l},p.value=!0},F=l=>{s.value=l,_.value=!0},$=()=>{r.value=r.value.filter(l=>l.id!==s.value.id),_.value=!1,s.value={},u.add({severity:"success",summary:"Successful",detail:"Item eliminado",life:3e3})},q=()=>{b.value=!0},A=()=>{r.value=r.value.filter(l=>!m.value.includes(l)),b.value=!1,m.value=null,u.add({severity:"success",summary:"Successful",detail:"Items eliminados",life:3e3})},O=()=>{y.value={global:{value:null,matchMode:X.CONTAINS}}};return(l,e)=>{const v=d("Toast"),o=d("Button"),w=d("Toolbar"),z=d("InputText"),T=d("Column"),G=d("DataTable"),E=d("Dialog");return S(),P("div",ae,[i("div",le,[i("div",se,[t(v),t(w,{class:"mb-4"},{start:c(()=>[i("div",oe,[t(o,{label:"Agregar",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:B}),t(o,{label:"Eliminar",icon:"pi pi-trash",class:"p-button-danger",onClick:q,disabled:!m.value||!m.value.length},null,8,["disabled"])])]),_:1}),t(G,{ref_key:"dt",ref:M,value:r.value,selection:m.value,"onUpdate:selection":e[1]||(e[1]=a=>m.value=a),dataKey:"id",paginator:!0,rows:k.value.pageSize,filters:y.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrar {first} to {last} of {totalRecords} registros",responsiveLayout:"scroll",totalRecords:k.value.total,onPage:e[2]||(e[2]=a=>R(a)),lazy:"",loading:g.value},{header:c(()=>[i("div",ie,[ne,i("span",ce,[re,t(z,{modelValue:y.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=a=>y.value.global.value=a),placeholder:"Buscar...",onChange:D},null,8,["modelValue"])])])]),default:c(()=>[t(T,{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(T,{field:"description",header:"Descripci\xF3n",sortable:!0,headerStyle:"width:90%; min-width:10rem;"},{body:c(a=>[de,N(" "+I(a.data.description),1)]),_:1}),t(T,{headerStyle:"min-width:10rem;"},{body:c(a=>[t(o,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:K=>j(a.data)},null,8,["onClick"]),t(o,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:K=>F(a.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","rows","filters","totalRecords","loading"]),t(E,{visible:p.value,"onUpdate:visible":e[4]||(e[4]=a=>p.value=a),style:{width:"450px"},header:"Detalles",modal:!0,class:"p-fluid"},{footer:c(()=>[t(o,{label:"Cancelar",icon:"pi pi-times",class:"p-button-text",onClick:L}),t(o,{label:"Guardar",icon:"pi pi-check",class:"p-button-text",onClick:U})]),default:c(()=>[i("div",ue,[pe,t(z,{id:"name",modelValue:s.value.description,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.description=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:Y({"p-invalid":h.value&&!s.value.description})},null,8,["modelValue","class"]),h.value&&!s.value.description?(S(),P("small",me,"Descripci\xF3n es requerido.")):V("",!0)])]),_:1},8,["visible"]),t(E,{visible:_.value,"onUpdate:visible":e[6]||(e[6]=a=>_.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:c(()=>[t(o,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[5]||(e[5]=a=>_.value=!1)}),t(o,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:$})]),default:c(()=>[i("div",ve,[fe,s.value?(S(),P("span",ge,[N(" Desea eliminar el registro "),i("b",null,I(s.value.description),1),N("?")])):V("",!0)])]),_:1},8,["visible"]),t(E,{visible:b.value,"onUpdate:visible":e[8]||(e[8]=a=>b.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:c(()=>[t(o,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[7]||(e[7]=a=>b.value=!1)}),t(o,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:A})]),default:c(()=>[i("div",_e,[be,s.value?(S(),P("span",ye,"Desea eliminar todos los elementos seleccionados?")):V("",!0)])]),_:1},8,["visible"])])])])}}},xe=H(he,[["__scopeId","data-v-fd00a0b4"]]);export{xe as default};
