import{_ as W,j as X,r as o,k as Z,o as ee,F as le,b as u,c as L,d as I,e as a,f as t,g as n,i as _,t as w,m as M,q as te,s as ae}from"./index.7427913b.js";import{U as se}from"./UserService.21546f89.js";import{P as oe}from"./ProfileService.5b2022fe.js";const d=N=>(te("data-v-4074e1c5"),N=N(),ae(),N),ie={class:"grid"},ne={class:"col-12"},de={class:"card"},re={class:"my-2"},ue={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ce=d(()=>a("h5",{class:"m-0"},"Usuarios",-1)),pe={class:"block mt-2 md:mt-0 p-input-icon-left"},me=d(()=>a("i",{class:"pi pi-search"},null,-1)),ve=d(()=>a("span",{class:"p-column-title"},"Identificaci\xF3n",-1)),fe=d(()=>a("span",{class:"p-column-title"},"Nombre",-1)),_e=d(()=>a("span",{class:"p-column-title"},"Correo Electr\xF3nico",-1)),he=d(()=>a("span",{class:"p-column-title"},"Tel\xE9fono",-1)),be={class:"card p-fluid"},ge={class:"field"},ye=d(()=>a("label",{for:"firstName"},"Nombres",-1)),we={class:"field"},Ne=d(()=>a("label",{for:"lastName"},"Apellidos",-1)),xe={class:"field"},Ue=d(()=>a("label",{for:"dni"},"Identificaci\xF3n",-1)),ke={class:"field"},Ve=d(()=>a("label",{for:"email"},"Correo Electr\xF3nico",-1)),Ce={class:"field"},Se=d(()=>a("label",{for:"phone"},"Tel\xE9fono",-1)),De={class:"field"},Pe=d(()=>a("label",{for:"profileSelect"},"Perfil",-1)),Te={class:"flex align-items-center justify-content-center"},Le=d(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ie={key:0},Re={class:"flex align-items-center justify-content-center"},Me=d(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ze={key:0},Be={__name:"List",setup(N){const x=X(),S=o(null),U=o({page:0,pageSize:10,total:0}),p=o(!1),h=o(!1),b=o(!1),s={firstName:o(null),lastName:o(null),dni:o(null),email:o(null),phone:o(null)},c=o(null),z=o(null),k=o({}),D=o(!1),V=o(!1),R=o(null),P=o(null),g=new se,B=new oe;Z(()=>{G()}),ee(()=>{y()});const y=()=>{const i={page:1,pageSize:10,search:""};g.readUsers(i).then(e=>{S.value=e.data.entities,U.value=e.data.pagination}).finally(()=>{V.value=!1}),B.readProfilesAll().then(e=>{console.log(e),R.value=e.data.value})},E=i=>{V.value=!0;const{page:e,rows:m}=i,r={page:e+1,pageSize:m,search:""};g.readUsers(r).then(C=>{S.value=C.data.entities,U.value=C.data.pagination}).finally(()=>{V.value=!1})},j=()=>{s.value={},D.value=!1,p.value=!0},F=()=>{p.value=!1,D.value=!1},$=()=>{D.value=!0;let i=[];i.push(P.value.id);let e={username:s.email.value,firstName:s.firstName.value,lastName:s.lastName.value,identification:s.dni.value,email:s.email.value,phone:s.phone.value,profileIds:i};console.log(e),g.createUser(e).then(m=>{m.status==200||m.status==201?(x.add({severity:"success",summary:"Created",detail:"Record created successfully!",life:3e3}),close(),y()):x.add({severity:"error",summary:"Deleted",detail:"Error creating record!",life:3e3})}),s.value=null,p.value=!1},A=i=>{s.value={...i},p.value=!0},O=i=>{s.value=i,h.value=!0},Y=()=>{g.deleteUser(s.value.id).then(i=>{i.status===200&&x.add({severity:"success",summary:"",detail:"Record deleting",life:3e3})}),h.value=!1,s.value={},y()},q=()=>{b.value=!0},K=()=>{console.log(c.value[0].id),c.value.forEach(i=>{g.deleteUser(i.id).then(e=>{e.status===200&&x.add({severity:"success",summary:"",detail:"Record deleting",life:3e3})})}),b.value=!1,c.value=null,y()},G=()=>{k.value={global:{value:null,matchMode:le.CONTAINS}}};return(i,e)=>{const m=u("Toast"),r=u("Button"),C=u("Toolbar"),v=u("InputText"),f=u("Column"),H=u("DataTable"),J=u("Dropdown"),T=u("Dialog");return L(),I("div",ie,[a("div",ne,[a("div",de,[t(m),t(C,{class:"mb-4"},{start:n(()=>[a("div",re,[t(r,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:j}),t(r,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:q,disabled:!c.value||!c.value.length},null,8,["disabled"])])]),_:1}),t(H,{ref_key:"dt",ref:z,value:S.value,selection:c.value,"onUpdate:selection":e[1]||(e[1]=l=>c.value=l),dataKey:"id",paginator:!0,rows:U.value.pageSize,filters:k.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrar {first} to {last} of {totalRecords} registros",totalRecords:U.value.total,responsiveLayout:"scroll",onPage:e[2]||(e[2]=l=>E(l)),lazy:"",loading:V.value},{header:n(()=>[a("div",ue,[ce,a("span",pe,[me,t(v,{modelValue:k.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=l=>k.value.global.value=l),placeholder:"Buscar...",onChange:y},null,8,["modelValue"])])])]),default:n(()=>[t(f,{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(f,{field:"dni",header:"Dni",sortable:!0,headerStyle:"width:15%; min-width:10rem;"},{body:n(l=>[ve,_(" "+w(l.data.dni),1)]),_:1}),t(f,{field:"fullName",header:"Name",sortable:!0,headerStyle:"width:35%; min-width:10rem;"},{body:n(l=>[fe,_(" "+w(l.data.fullName),1)]),_:1}),t(f,{field:"email",header:"Email",sortable:!0,headerStyle:"width:25%; min-width:10rem;"},{body:n(l=>[_e,_(" "+w(l.data.email),1)]),_:1}),t(f,{field:"phone",header:"Phone",sortable:!0,headerStyle:"width:15%; min-width:10rem;"},{body:n(l=>[he,_(" "+w(l.data.phone),1)]),_:1}),t(f,{headerStyle:"min-width:10rem;"},{body:n(l=>[t(r,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:Q=>A(l.data)},null,8,["onClick"]),t(r,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:Q=>O(l.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","rows","filters","totalRecords","loading"]),t(T,{visible:p.value,"onUpdate:visible":e[9]||(e[9]=l=>p.value=l),style:{width:"450px"},header:"User Details",modal:!0,class:"p-fluid"},{footer:n(()=>[t(r,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:F}),t(r,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:$})]),default:n(()=>[a("div",be,[a("div",ge,[ye,t(v,{id:"firstName",type:"text",modelValue:s.firstName.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s.firstName.value=l)},null,8,["modelValue"])]),a("div",we,[Ne,t(v,{id:"lastName",type:"text",modelValue:s.lastName.value,"onUpdate:modelValue":e[4]||(e[4]=l=>s.lastName.value=l)},null,8,["modelValue"])]),a("div",xe,[Ue,t(v,{id:"dni",type:"text",modelValue:s.dni.value,"onUpdate:modelValue":e[5]||(e[5]=l=>s.dni.value=l)},null,8,["modelValue"])]),a("div",ke,[Ve,t(v,{id:"email",type:"text",modelValue:s.email.value,"onUpdate:modelValue":e[6]||(e[6]=l=>s.email.value=l)},null,8,["modelValue"])]),a("div",Ce,[Se,t(v,{id:"phone",type:"text",modelValue:s.phone.value,"onUpdate:modelValue":e[7]||(e[7]=l=>s.phone.value=l)},null,8,["modelValue"])]),a("div",De,[Pe,t(J,{id:"profileSelect",modelValue:P.value,"onUpdate:modelValue":e[8]||(e[8]=l=>P.value=l),options:R.value,optionLabel:"name",placeholder:"Seleccione Perfil"},null,8,["modelValue","options"])])])]),_:1},8,["visible"]),t(T,{visible:h.value,"onUpdate:visible":e[11]||(e[11]=l=>h.value=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[t(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[10]||(e[10]=l=>h.value=!1)}),t(r,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:Y})]),default:n(()=>[a("div",Te,[Le,s?(L(),I("span",Ie,[_("Desea eliminar el registro "),a("b",null,w(i.catalog.description),1),_("?")])):M("",!0)])]),_:1},8,["visible"]),t(T,{visible:b.value,"onUpdate:visible":e[13]||(e[13]=l=>b.value=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[t(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[12]||(e[12]=l=>b.value=!1)}),t(r,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:K})]),default:n(()=>[a("div",Re,[Me,s?(L(),I("span",ze,"Desea eliminar todos los usuarios seleccionados?")):M("",!0)])]),_:1},8,["visible"])])])])}}},$e=W(Be,[["__scopeId","data-v-4074e1c5"]]);export{$e as default};
